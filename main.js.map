{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project-ff/./src/scripts/card.js","webpack://mesto-project-ff/./src/scripts/modal.js","webpack://mesto-project-ff/./src/scripts/validation.js","webpack://mesto-project-ff/./src/scripts/api.js","webpack://mesto-project-ff/./src/scripts/utils.js","webpack://mesto-project-ff/./src/index.js"],"sourcesContent":["function createCard(template, cardData, cardHandlers, profileInfo) {\n  const cardItem = getCardTemplate(template, '.card');\n  const deleteButton = cardItem.querySelector('.card__delete-button');\n  const cardImage = cardItem.querySelector('.card__image');\n  const likeButton = cardItem.querySelector('.card__like-button');\n  const likeCounter =  cardItem.querySelector('.card__like-counter');\n\n  cardImage.src = cardData.link;\n  cardImage.alt = cardData.name;\n  likeCounter.textContent = cardData.likes.length;\n\n  \n  if (cardData.likes.some((profile) => {\n    return profile['_id'] === profileInfo['_id']\n  })) {\n    likeButton.classList.add('card__like-button_is-active')\n  }\n\n  if (cardData.owner['_id'] === profileInfo['_id']) {\n    deleteButton.classList.add('card__delete-button_active');\n    deleteButton.addEventListener('click', () => {\n      const confirmDeleteModal = cardHandlers.onOpenConfirmDeleteModal()\n      const confirmButton = confirmDeleteModal.querySelector('.popup__button')\n      confirmButton.addEventListener('click', (evt) => {\n        cardHandlers.onDelete(cardData['_id'])\n        .then(()=> {\n          handleDeleteCardFromDOM(cardItem);\n          cardHandlers.onCloseModal(confirmDeleteModal);\n        })\n        .catch((err) => {\n          console.log(`Ошибка удаления карточки: ${err}`)\n        })\n      })\n      \n    });\n  }\n\n  likeButton.addEventListener('click', () => {\n    if (likeButton.classList.contains('card__like-button_is-active')) {\n      cardHandlers.onDeleteLike(cardData['_id'])\n        .then((res) => {\n          const likeCount = res.likes.length;\n          handleLikeCard(likeButton, likeCounter, likeCount)\n        })\n        .catch((err) => {\n          console.log(`Ошибка удаления лайка: ${err}`)\n        })\n    } else {\n      cardHandlers.onPutLike(cardData['_id'])\n        .then((res) => {\n          const likeCount = res.likes.length;\n          handleLikeCard(likeButton, likeCounter, likeCount)\n        })\n        .catch((err) => {\n          console.log(`Ошибка постановки лайка: ${err}`)\n        })\n    }\n  });\n\n  cardItem.querySelector('.card__title').textContent = cardData.name;\n\n  likeButton.addEventListener('click', cardHandlers.onLike);\n\n  cardImage.addEventListener('click', () => {\n    cardHandlers.onOpenModal(cardData.link, cardData.name);\n  });\n\n  return cardItem;\n}\n\nfunction getCardTemplate(template, selector) {\n  return template.querySelector(selector).cloneNode(true);\n}\n\nfunction handleDeleteCardFromDOM(card) {\n  card.remove();\n}\n\nfunction handleLikeCard(likeButton, likeCounter, count) {\n  likeButton.classList.toggle('card__like-button_is-active');\n  likeCounter.textContent = count;\n}\n\nexport { createCard };\n","function openModal(modal) {\r\n  modal.classList.add('popup_is-opened');\r\n  document.addEventListener('keydown', handleEscape);\r\n}\r\n\r\nfunction closeModal(modal) {\r\n  modal.classList.remove('popup_is-opened');\r\n  document.removeEventListener('keydown', handleEscape);\r\n}\r\n\r\nfunction handleEscape(evt) {\r\n  if (evt.key === 'Escape') {\r\n    const openedModal = document.querySelector('.popup_is-opened');\r\n    closeModal(openedModal);\r\n  }\r\n}\r\n\r\nfunction setCloseModal(modals) {\r\n  modals.forEach((modal) => {\r\n    modal.addEventListener('mousedown', (evt) => {\r\n      const target = evt.target;\r\n      if (\r\n        target.classList.contains('popup_is-opened') ||\r\n        target.classList.contains('popup__close')\r\n      ) {\r\n        closeModal(modal);\r\n      }\r\n    });\r\n  });\r\n}\r\n\r\nexport { openModal, closeModal, setCloseModal };\r\n","function showInputError(formElement, inputElement, errorMessage, validationConfig) {\r\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n  inputElement.classList.add(validationConfig.inputErrorClass);\r\n  errorElement.textContent = errorMessage;\r\n  errorElement.classList.add(validationConfig.errorClass);\r\n}\r\n\r\nfunction hideInputError(formElement, inputElement, validationConfig) {\r\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n  inputElement.classList.remove(validationConfig.inputErrorClass);\r\n  errorElement.classList.remove(validationConfig.errorClass);\r\n  inputElement.setCustomValidity('');\r\n  errorElement.textContent = '';\r\n}\r\n\r\nfunction checkInputIsValid(formElement, inputElement, validationConfig) {\r\n  if (inputElement.validity.patternMismatch) {\r\n    inputElement.setCustomValidity(inputElement.dataset.errorMessage)\r\n  } else {\r\n    inputElement.setCustomValidity('');\r\n  }\r\n\r\n  if (!inputElement.validity.valid) {\r\n    showInputError(formElement, inputElement, inputElement.validationMessage, validationConfig);\r\n  } else {\r\n    hideInputError(formElement, inputElement, validationConfig);\r\n  }\r\n}\r\n\r\nfunction hasInvalidInput(inputList) {\r\n  return inputList.some((inputElement) => {\r\n    return !inputElement.validity.valid\r\n  }) \r\n}\r\n\r\nconst toggleButtonState = (inputList, buttonElement, validationConfig) => {\r\n  if (hasInvalidInput(inputList)) {\r\n    buttonElement.setAttribute('disabled', true);\r\n    buttonElement.classList.add(validationConfig.inactiveButtonClass);\r\n  } else {\r\n    buttonElement.removeAttribute('disabled');\r\n    buttonElement.classList.remove(validationConfig.inactiveButtonClass);\r\n  }\r\n}\r\n\r\nfunction setEventListeners(formElement, validationConfig) {\r\n  const inputList = Array.from(formElement.querySelectorAll(validationConfig.inputSelector));\r\n  const buttonElement = formElement.querySelector(validationConfig.submitButtonSelector);\r\n  toggleButtonState(inputList, buttonElement, validationConfig);\r\n  inputList.forEach((inputElement) => {\r\n    inputElement.addEventListener('input', function() {\r\n      checkInputIsValid(formElement, inputElement, validationConfig);\r\n      toggleButtonState(inputList, buttonElement, validationConfig);\r\n    });\r\n  });\r\n}\r\n\r\nexport function enableValidation(validationConfig) {\r\n  const formList = Array.from(document.querySelectorAll(validationConfig.formSelector));\r\n  formList.forEach((formElement) => {\r\n    formElement.addEventListener('submit', (evt) => {\r\n      evt.preventDefault()\r\n    })\r\n\r\n    setEventListeners(formElement, validationConfig)\r\n  })\r\n}\r\n\r\nexport function  clearValidation(formElement, validationConfig) {\r\n  const inputList = Array.from(formElement.querySelectorAll(validationConfig.inputSelector));\r\n  const buttonElement = formElement.querySelector(validationConfig.submitButtonSelector);\r\n  inputList.forEach((inputElement) => {\r\n    hideInputError(formElement, inputElement, validationConfig)\r\n  });\r\n  toggleButtonState(inputList, buttonElement, validationConfig);\r\n}\r\n","const config = {\r\n  baseUrl: 'https://nomoreparties.co/v1/wff-cohort-10',\r\n  headers: {\r\n    authorization: '38816a01-ce10-4ad5-a912-b35c9441eab8',\r\n    'Content-Type': 'application/json',\r\n  },\r\n};\r\n\r\nfunction checkResponse(res) {\r\n  if (res.ok) {\r\n    return res.json();\r\n  }\r\n  return Promise.reject(`Ошибка: ${res.status}`);\r\n}\r\n\r\nexport const getInitialCards = () => {\r\n  return fetch(`${config.baseUrl}/cards`, {\r\n    headers: config.headers,\r\n  }).then((res) => {\r\n    return checkResponse(res);\r\n  });\r\n};\r\n\r\nexport function getProfileInfo() {\r\n  return fetch(`${config.baseUrl}/users/me`, {\r\n    headers: config.headers,\r\n  }).then((res) => {\r\n    return checkResponse(res);\r\n  });\r\n}\r\n\r\nexport function editProfile(newName, newDescription) {\r\n  return fetch(`${config.baseUrl}/users/me`, {\r\n    method: 'PATCH',\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      name: newName,\r\n      about: newDescription,\r\n    }),\r\n  }).then((res) => {\r\n    return checkResponse(res);\r\n  });\r\n}\r\n\r\nexport function addCard(newName, newLink) {\r\n  return fetch(`${config.baseUrl}/cards`, {\r\n    method: 'POST',\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      name: newName,\r\n      link: newLink,\r\n    }),\r\n  }).then((res) => {\r\n    return checkResponse(res);\r\n  });\r\n}\r\n\r\nexport function deleteCard(cardId) {\r\n  return fetch(`${config.baseUrl}/cards/${cardId}`, {\r\n    method: 'DELETE',\r\n    headers: config.headers,\r\n  }).then((res) => {\r\n    return checkResponse(res);\r\n  });\r\n}\r\n\r\nexport function putCardLike(cardId) {\r\n  return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\r\n    method: 'PUT',\r\n    headers: config.headers,\r\n  }).then((res) => {\r\n    return checkResponse(res);\r\n  });\r\n}\r\n\r\nexport function deleteCardLike(cardId) {\r\n  return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\r\n    method: 'DELETE',\r\n    headers: config.headers,\r\n  }).then((res) => {\r\n    return checkResponse(res);\r\n  });\r\n}\r\n\r\nexport function getCardLikeCount(cardId) {\r\n  return fetch(`${config.baseUrl}/cards/${cardId}`, {\r\n    method: 'GET',\r\n    headers: config.headers,\r\n  }).then((res) => {\r\n    return checkResponse(res);\r\n  });\r\n}\r\n\r\nexport function editProfileAvatar(link) {\r\n  return fetch(`${config.baseUrl}/users/me/avatar `, {\r\n    method: 'PATCH',\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      avatar: link,\r\n    }),\r\n  }).then((res) => {\r\n    return checkResponse(res);\r\n  });\r\n}\r\n\r\n\r\n","export function dataLoading(button, isLoading) {\r\n  if (isLoading) {\r\n    button.textContent = 'Сохранение...';\r\n  } else {\r\n    button.textContent = 'Сохранить';\r\n  }\r\n}","import './pages/index.css';\nimport { createCard } from './scripts/card';\nimport { openModal, closeModal, setCloseModal } from './scripts/modal';\nimport { enableValidation, clearValidation } from './scripts/validation';\nimport {\n  getProfileInfo,\n  getInitialCards,\n  editProfile,\n  addCard,\n  deleteCard,\n  putCardLike,\n  deleteCardLike,\n  editProfileAvatar,\n} from './scripts/api';\nimport { dataLoading } from './scripts/utils';\n\nconst container = document.querySelector('.content');\nconst cardTemplate = document.querySelector('#card-template').content;\nconst placesList = container.querySelector('.places__list');\nconst profileEditButton = container.querySelector('.profile__edit-button');\nconst profileAddButton = container.querySelector('.profile__add-button');\n\n// Модальное окно редактирования профиля\nconst profileEditModal = document.querySelector('.popup_type_edit');\n\n//Модальное окно добавления новой карточки\nconst newCardAddModal = document.querySelector('.popup_type_new-card');\n\n//Модальное окно изменения фото профиля\nconst profileAvatarEditModal = document.querySelector(\n  '.popup_type_edit-profile-avatar'\n);\n\n// форма редактирования профиля\nconst profileEditForm = document.forms['edit-profile'];\nconst profileNameInput = profileEditForm.querySelector(\n  '.popup__input_type_name'\n);\nconst profileJobInput = profileEditForm.querySelector(\n  '.popup__input_type_description'\n);\n\n//Форма редактирования аватара профиля\nconst profileAvatarEditForm = document.forms['new-avatar'];\nconst profileAvatarInput = profileAvatarEditForm.querySelector(\n  '.popup__input_type_url'\n);\n\n//массив попапов страницы\nconst modals = document.querySelectorAll('.popup');\n\n//Данные профиля\nconst profileTitle = container.querySelector('.profile__title');\nconst profileDescription = container.querySelector('.profile__description');\nconst profileImage = container.querySelector('.profile__image');\n\n// форма добавления новой карточки\nconst newCardForm = document.forms['new-place'];\nconst imageNameInput = newCardForm.querySelector(\n  '.popup__input_type_card-name'\n);\nconst imageUrlInput = newCardForm.querySelector('.popup__input_type_url');\n\n// Модальное окно увеличения картинки карточки\nconst fullImageModal = document.querySelector('.popup_type_image');\nconst fullImage = fullImageModal.querySelector('.popup__image');\nconst fullImageCaption = fullImageModal.querySelector('.popup__caption');\n\n// Модальное окно подтверждения удаления карточки\nconst condirmCardDeleteModal = document.querySelector(\n  '.popup_type_confirm-card-delete'\n);\n\nconst validationConfig = {\n  formSelector: '.popup__form',\n  inputSelector: '.popup__input',\n  submitButtonSelector: '.popup__button',\n  inactiveButtonClass: 'popup__button_disabled',\n  inputErrorClass: 'popup__input_type_error',\n  errorClass: 'popup__error_visible',\n};\n\nconst cardHandlers = {\n  onDelete: deleteCard,\n  onPutLike: putCardLike,\n  onDeleteLike: deleteCardLike,\n  onOpenModal: handleOpenImageModal,\n  onOpenConfirmDeleteModal: handleOpenConfirmCardDeleteModal,\n  onCloseModal: closeModal,\n};\n\nfunction handleEditFormSubmit(evt) {\n  evt.preventDefault();\n  dataLoading(evt.submitter, true);\n  const name = profileNameInput.value;\n  const job = profileJobInput.value;\n  editProfile(name, job)\n    .then((profileData) => {\n      profileTitle.textContent = profileData.name;\n      profileDescription.textContent = profileData.about;\n      closeModal(profileEditModal);\n    })\n    .catch((err) => {\n      console.log(`Ошибка обновления данных профиля: ${err}`);\n    })\n    .finally(() => {\n      dataLoading(evt.submitter, false);\n    });\n}\n\nfunction handleNewCardFormSubmit(evt) {\n  evt.preventDefault();\n  dataLoading(evt.submitter, true);\n  const name = imageNameInput.value;\n  const link = imageUrlInput.value;\n  Promise.all([addCard(name, link), getProfileInfo()])\n    .then(([cardData, profileData]) => {\n      renderCard(cardData, profileData);\n      closeModal(newCardAddModal);\n    })\n    .catch((err) => {\n      console.log(`Ошибка добавления поста: ${err}`);\n    })\n    .finally(() => {\n      dataLoading(evt.submitter, false);\n    });\n}\n\nfunction handleEditProfileAvatarFormSubmit(evt) {\n  evt.preventDefault();\n  dataLoading(evt.submitter, true);\n  const link = profileAvatarInput.value;\n  editProfileAvatar(link)\n    .then((data) => {\n      profileImage.style.backgroundImage = `url('${data.avatar}')`;\n      closeModal(profileAvatarEditModal);\n    })\n    .catch((err) => {\n      console.log(`Ошибка обновления аватара: ${err}`);\n    })\n    .finally(() => {\n      dataLoading(evt.submitter, false);\n    });\n}\n\nfunction handleOpenImageModal(link, name) {\n  fullImage.src = link;\n  fullImage.alt = name;\n  fullImageCaption.textContent = name;\n  openModal(fullImageModal);\n}\n\nfunction handleOpenConfirmCardDeleteModal() {\n  openModal(condirmCardDeleteModal);\n  return condirmCardDeleteModal;\n}\n\nfunction renderCard(card, profileInfo, method = 'prepend') {\n  const cardElement = createCard(cardTemplate, card, cardHandlers, profileInfo);\n  placesList[method](cardElement);\n}\n\nfunction renderCardsList(cards, profileInfo) {\n  cards.forEach((card) => {\n    renderCard(card, profileInfo, 'append');\n  });\n}\n\nprofileEditButton.addEventListener('click', () => {\n  openModal(profileEditModal);\n  profileNameInput.value = profileTitle.textContent;\n  profileJobInput.value = profileDescription.textContent;\n  clearValidation(profileEditForm, validationConfig);\n});\n\nprofileAddButton.addEventListener('click', () => {\n  newCardForm.reset();\n  clearValidation(newCardForm, validationConfig);\n  openModal(newCardAddModal);\n});\n\nprofileImage.addEventListener('click', () => {\n  profileAvatarEditForm.reset();\n  clearValidation(profileAvatarEditForm, validationConfig);\n  openModal(profileAvatarEditModal);\n});\n\nprofileEditForm.addEventListener('submit', handleEditFormSubmit);\n\nnewCardForm.addEventListener('submit', handleNewCardFormSubmit);\n\nprofileAvatarEditForm.addEventListener(\n  'submit',\n  handleEditProfileAvatarFormSubmit\n);\n\n//внутри функции навешиваем обработчик закрытия на все попапы на странице\nsetCloseModal(modals);\n\nenableValidation(validationConfig);\n\nPromise.all([getProfileInfo(), getInitialCards()])\n  .then(([profileData, initialCards]) => { \n    const renderCards = initialCards.filter(card=>!/хуй/i.test(card.name));\n    profileTitle.textContent = profileData.name;\n    profileDescription.textContent = profileData.about;\n    profileImage.style.backgroundImage = `url('${profileData.avatar}')`;\n    renderCardsList(renderCards, profileData);\n  })\n  .catch((err) => {\n    console.log(err);\n  });\n"],"names":["handleLikeCard","likeButton","likeCounter","count","classList","toggle","textContent","openModal","modal","add","document","addEventListener","handleEscape","closeModal","remove","removeEventListener","evt","key","querySelector","hideInputError","formElement","inputElement","validationConfig","errorElement","concat","id","inputErrorClass","errorClass","setCustomValidity","toggleButtonState","inputList","buttonElement","some","validity","valid","hasInvalidInput","removeAttribute","inactiveButtonClass","setAttribute","clearValidation","Array","from","querySelectorAll","inputSelector","submitButtonSelector","forEach","config","baseUrl","headers","authorization","checkResponse","res","ok","json","Promise","reject","status","getProfileInfo","fetch","then","dataLoading","button","isLoading","container","cardTemplate","content","placesList","profileEditButton","profileAddButton","profileEditModal","newCardAddModal","profileAvatarEditModal","profileEditForm","forms","profileNameInput","profileJobInput","profileAvatarEditForm","profileAvatarInput","modals","profileTitle","profileDescription","profileImage","newCardForm","imageNameInput","imageUrlInput","fullImageModal","fullImage","fullImageCaption","condirmCardDeleteModal","formSelector","cardHandlers","onDelete","cardId","method","onPutLike","onDeleteLike","onOpenModal","link","name","src","alt","onOpenConfirmDeleteModal","onCloseModal","renderCard","card","profileInfo","arguments","length","undefined","cardElement","template","cardData","cardItem","selector","cloneNode","getCardTemplate","deleteButton","cardImage","likes","profile","owner","confirmDeleteModal","catch","err","console","log","contains","likeCount","onLike","createCard","value","reset","newName","newDescription","preventDefault","submitter","body","JSON","stringify","about","profileData","finally","newLink","all","_ref","_ref2","_slicedToArray","avatar","data","style","backgroundImage","target","setCloseModal","patternMismatch","dataset","errorMessage","showInputError","validationMessage","checkInputIsValid","setEventListeners","enableValidation","_ref3","_ref4","renderCards","filter","test"],"sourceRoot":""}